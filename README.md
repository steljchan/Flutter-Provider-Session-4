Pada localstate project saya memisahkannya menjadi beberapa file, yaitu file main.dart, models/counter_item.dart, widgets/counter_card.dart, screens/counter_home.dart. File main.dart berperan sebagai pintu masuk aplikasi Flutter. Pada bagian ini terdapat fungsi main() yang memanggil runApp dan menjalankan widget CounterApp. Di dalam CounterApp, aplikasi dibungkus dengan MaterialApp yang mengatur tema global (conothnya warna biru dengan colorSchemeSeed) dan menentukan halaman awal, yaitu CounterHomePage. Fungsi utama dari file ini adalah memastikan aplikasi memiliki struktur dasar Flutter dengan gaya Material Design serta menghubungkan ke halaman utama. Namun, file ini tidak menyimpan state apa punâ€”perannya hanya sebagai pengatur kerangka dasar aplikasi.

File models/counter_item.dart bertugas mendefinisikan struktur data untuk setiap counter. Model CounterItem menyimpan atribut penting seperti label untuk nama counter, value untuk nilai angka, dan color untuk warna tampilan counter tersebut. Model ini berfungsi seperti "blueprint" supaya setiap counter yang ditambahkan atau ditampilkan punya format data yang konsisten. Dengan adanya model terpisah, kode menjadi lebih rapi karena pemisahan antara data dan logika UI. Namun, model ini sendiri hanya berupa data polos (plain data object) dan tidak menyimpan state secara global, melainkan digunakan oleh widget yang memiliki state di halaman tertentu.
File widgets/counter_card.dart adalah widget yang bertanggung jawab menampilkan tampilan visual untuk satu counter. Di dalamnya ada teks label, angka counter, serta tombol untuk menambah, mengurangi, dan mengubah warna counter. Karena widget ini dibuat sebagai StatefulWidget, perubahan seperti animasi angka atau pemilihan warna bisa dikelola di dalam widget itu sendiri. Meski terlihat seperti punya state, tapi state yang memengaruhi daftar counter tetap dikendalikan dari file utama CounterHomePage. Artinya, CounterCard hanya menampilkan dan menjalankan fungsi yang diberikan oleh parent, bukan menyimpan state global. Inilah yang menegaskan bahwa state masih lokal dan dikontrol oleh widget induk.

File screens/counter_home.dart adalah pusat pengelolaan state aplikasi ini. Di sini terdapat daftar counters yang disimpan dalam kelas _CounterHomePageState. Semua perubahan seperti menambah counter baru, mengedit label, mengganti warna, mengurutkan ulang daftar, dan mengatur increment-decrement dilakukan melalui setState yang hanya berlaku di halaman ini. Karena data disimpan di dalam state CounterHomePage, maka hanya widget yang berada dalam lingkup halaman ini yang tahu dan bisa mengakses perubahan tersebut. Itulah ciri khas local state: state hidup dan terbatas pada satu widget (dan turunannya), tidak bisa langsung diakses dari halaman lain tanpa dioper secara manual. Dengan kata lain, meskipun ada banyak counter dan interaksi kompleks, seluruh kendali tetap berada pada satu halaman, menunjukkan penggunaan local state.

Sedangkan untuk struktur project globalstate terdiri dari beberapa file utama yang masing-masing punya peran spesifik, dan jika digabungkan, mereka membentuk aplikasi berbasis global state dengan bantuan Provider. File utama main.dart adalah entry point aplikasi. Di sini, aplikasi dibungkus dengan ChangeNotifierProvider, yang menyediakan instance dari GlobalState ke seluruh widget tree. Artinya, semua widget anak yang ada di dalam MaterialApp bisa mengakses data dan fungsi dari GlobalState tanpa harus mengoper data secara manual melalui konstruktor. Pemisahan seperti ini penting agar state yang digunakan bersifat global dan tidak hanya terbatas pada satu widget tertentu.

File global_state.dart berperan sebagai pusat logika dan data. File ini menyimpan daftar counter dalam bentuk list dari CounterModel, serta menyediakan fungsi-fungsi seperti addCounter, removeCounter, increment, decrement, changeLabel, changeColor, dan reorder. Karena file ini diturunkan dari ChangeNotifier, setiap kali ada perubahan data, ia akan memanggil notifyListeners(), yang otomatis memberi tahu semua widget yang mendengarkan state ini untuk memperbarui tampilan. Dengan cara ini, GlobalState bertindak sebagai global data store dan pusat kontrol aplikasi, sehingga pemisahan logika bisnis dari UI tercapai.

File counter_model.dart berisi definisi dari CounterModel, yaitu blueprint sederhana untuk objek counter. Model ini menyimpan atribut label, value, dan color yang digunakan untuk menampilkan setiap counter di UI. Pemisahan model ke file terpisah membuat kode lebih rapi, karena jika suatu saat struktur data counter berubah, kita cukup mengubah model ini tanpa harus merombak seluruh kode. Dengan adanya model, data yang dikelola oleh global state jadi lebih terstruktur, tidak hanya berupa integer atau string, tetapi objek kompleks dengan properti jelas.

File counter_item.dart adalah representasi visual dari satu counter di UI. Di dalamnya, sebuah Card dengan dekorasi warna gradient digunakan untuk menampilkan label dan nilai counter. Terdapat tombol + dan - untuk menambah atau mengurangi nilai, serta tombol delete untuk menghapus counter. Selain itu, jika card ditekan, akan muncul dialog untuk mengedit label atau warna counter. Widget ini terhubung langsung dengan GlobalState melalui Provider.of<GlobalState>, sehingga bisa memanggil fungsi-fungsi global (seperti increment, decrement, atau removeCounter). Pemisahan ke dalam file ini penting agar setiap bagian UI lebih reusable dan mudah diatur.

File main.dart juga memiliki class tambahan BackgroundPainter, yang digunakan untuk menggambar dekorasi gelombang pada latar belakang. Meski terlihat sederhana, bagian ini menunjukkan bagaimana tampilan dipisahkan dari logika utama aplikasi. Dengan membagi kode ke dalam file main.dart, global_state.dart, counter_model.dart, dan counter_item.dart, aplikasi ini jelas mengimplementasikan global state: state hanya didefinisikan sekali (di GlobalState), tetapi bisa digunakan di berbagai widget tanpa harus menduplikasi data atau mengoper state secara manual. Inilah yang membuat aplikasi lebih scalable, rapi, dan mudah dipelihara ketika jumlah fitur semakin banyak.

Perbedaan paling mencolok antara local dan global state dalam dua project ini ada pada lokasi penyimpanan data dan aksesibilitasnya. Local state tersimpan di dalam widget dan hanya bisa dipakai di sana, sementara global state disimpan di class terpisah sehingga bisa diakses dari mana saja di aplikasi. Local state cocok untuk kasus sederhana, seperti counter tunggal dalam satu halaman, sedangkan global state cocok untuk aplikasi yang kompleks, seperti menampilkan daftar banyak counter yang bisa ditambah, dihapus, diganti label, diganti warna, bahkan diurutkan ulang.

Dengan kata lain, project pertama menggambarkan bagaimana local state efektif untuk kebutuhan terbatas yang hanya memengaruhi satu widget, sedangkan project kedua menggambarkan bagaimana global state memungkinkan pengelolaan data yang lebih besar dan lebih fleksibel. Local state menekankan kesederhanaan dan kecepatan implementasi, sementara global state menekankan keteraturan, skalabilitas, dan kemampuan berbagi data antar-widget. Kedua pendekatan ini sama-sama penting dipahami karena saling melengkapi sesuai kebutuhan aplikasi yang sedang dibangun.

Untuk error sendiri, ada error yang muncul dari penggunaan method withOpacity() pada objek warna Color. Method ini sudah masuk kategori deprecated pada versi Flutter terbaru karena berpotensi menimbulkan precision loss. Meskipun tidak menghentikan jalannya aplikasi, penggunaan method tersebut menghasilkan peringatan yang sebaiknya diperbaiki agar kode tetap kompatibel dengan standar terbaru Flutter. Solusi yang dilakukan adalah mengganti setiap pemanggilan withOpacity(value) menjadi withValues(alpha: value), di mana parameter alpha diisi dengan nilai transparansi antara 0 sampai 1. Sebagai contoh, kode Colors.blue.withOpacity(0.2) diperbaiki menjadi Colors.blue.withValues(alpha: 0.2). Dengan perubahan ini, peringatan deprecated berhasil dihilangkan tanpa memengaruhi fungsi aplikasi.

Selain itu, pada implementasi fitur edit warna CounterCard, penanganan error dilakukan untuk memastikan aplikasi tetap stabil saat pengguna memilih warna. Warna yang dipilih dibatasi hanya dari daftar presetColors yang sudah ditentukan sebelumnya, sehingga tidak ada kemungkinan nilai null atau warna tidak valid yang bisa menyebabkan error ketika widget dirender. Pemanggilan setState() juga diatur agar hanya dilakukan setelah dialog pemilihan warna ditutup, sehingga proses pembaruan state lebih terkontrol dan tidak menimbulkan konflik saat UI sedang membangun ulang.
